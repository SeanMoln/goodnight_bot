name: Discord Scheduled Push

on:
  schedule:
     - cron: "50 0 * * *"  # å°ç£æ¯å¤© 21:00 (UTC+8)
  workflow_dispatch: {}

jobs:
  push:
    runs-on: ubuntu-latest
    steps:
      - name: Send message to Discord webhook
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        run: |
          if [ -z "$DISCORD_WEBHOOK_URL" ]; then
            echo "Missing DISCORD_WEBHOOK_URL secret"
            exit 1
          fi

          MESSAGE="ğŸ“¢ @everyone è·é›¢å…¬æœƒç‹é‚„æœ‰ååˆ†é˜ï¼Œå¿«ä¸Šç·š!!ï¼š$(date -u '+%Y-%m-%d %H:%M UTC')"
          curl -sS -H "Content-Type: application/json" \
            -d "{\"content\":\"$MESSAGE\"}" \
            "$DISCORD_WEBHOOK_URL"
