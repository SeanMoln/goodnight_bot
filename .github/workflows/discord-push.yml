name: Discord Scheduled Push

on:
  schedule:
     - cron: "50 12 * * *" 
  workflow_dispatch: {}

jobs:
  push:
    runs-on: ubuntu-latest
    steps:
      - name: Send message to Discord webhook
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        run: |
          if [ -z "$DISCORD_WEBHOOK_URL" ]; then
            echo "Missing DISCORD_WEBHOOK_URL secret"
            exit 1
          fi

          MESSAGE="ğŸ“¢ è·é›¢å…¬æœƒç‹é‚„æœ‰äº”åˆ†é˜ï¼Œå¿«ä¸Šç·š!!ï¼š$(TZ=Asia/Taipei date '+%Y-%m-%d %H:%M %Z')"
          curl -sS -H "Content-Type: application/json" \
            -d "{\"content\":\"$MESSAGE\"}" \
            "$DISCORD_WEBHOOK_URL"
